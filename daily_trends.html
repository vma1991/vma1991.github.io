
<!doctype html>
<html lang="fr">

	<head>
		<title>vma1991.net</title>

		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link rel="stylesheet" href="style.css">
	</head>

	<body>

		<script type="text/javascript">

			const pageTitle = document.createElement('h3');
			pageTitle.textContent = "Yesterday's trending Google queries";
			document.body.appendChild(pageTitle);

			const contentDiv = document.createElement('div');
			document.body.appendChild(contentDiv);

			const countrySelect = document.createElement('select');

			var optionAR = document.createElement('option');
			optionAR.text = 'AR - Argentina';
			optionAR.value = 'AR';
			countrySelect.add(optionAR);

			var optionAT = document.createElement('option');
			optionAT.text = 'AT - Austria';
			optionAT.value = 'AT';
			countrySelect.add(optionAT);

			var optionAU = document.createElement('option');
			optionAU.text = 'AU - Australia';
			optionAU.value = 'AU';
			countrySelect.add(optionAU);

			var optionBE = document.createElement('option');
			optionBE.text = 'BE - Belgium';
			optionBE.value = 'BE';
			countrySelect.add(optionBE);

			var optionBR = document.createElement('option');
			optionBR.text = 'BR - Brazil';
			optionBR.value = 'BR';
			countrySelect.add(optionBR);

			var optionCA = document.createElement('option');
			optionCA.text = 'CA - Canada';
			optionCA.value = 'CA';
			countrySelect.add(optionCA);

			var optionCH = document.createElement('option');
			optionCH.text = 'CH - Switzerland';
			optionCH.value = 'CH';
			countrySelect.add(optionCH);

			var optionCL = document.createElement('option');
			optionCL.text = 'CL - Chile';
			optionCL.value = 'CL';
			countrySelect.add(optionCL);

			var optionCO = document.createElement('option');
			optionCO.text = 'CO - Colombia';
			optionCO.value = 'CO';
			countrySelect.add(optionCO);
			
			var optionCZ = document.createElement('option');
			optionCZ.text = 'CZ - Czechia';
			optionCZ.value = 'CZ';
			countrySelect.add(optionCZ);
			
			var optionDE = document.createElement('option');
			optionDE.text = 'DE - Germany';
			optionDE.value = 'DE';
			countrySelect.add(optionDE);

			var optionDK = document.createElement('option');
			optionDK.text = 'DK - Denmark';
			optionDK.value = 'DK';
			countrySelect.add(optionDK);

			var optionEG = document.createElement('option');
			optionEG.text = 'EG - Egypt';
			optionEG.value = 'EG';
			countrySelect.add(optionEG);

			var optionFI = document.createElement('option');
			optionFI.text = 'FI - Finland';
			optionFI.value = 'FI';
			countrySelect.add(optionFI);

			var optionFR = document.createElement('option');
			optionFR.text = 'FR - France';
			optionFR.value = 'FR';
			optionFR.selected = true;
			countrySelect.add(optionFR);

			var optionGB = document.createElement('option');
			optionGB.text = 'GB - Great Britain';
			optionGB.value = 'GB';
			countrySelect.add(optionGB);

			var optionGR = document.createElement('option');
			optionGR.text = 'GR - Greece';
			optionGR.value = 'GR';
			countrySelect.add(optionGR);

			var optionHK = document.createElement('option');
			optionHK.text = 'HK - Hong Kong';
			optionHK.value = 'HK';
			countrySelect.add(optionHK);

			var optionHU = document.createElement('option');
			optionHU.text = 'HU - Hungaria';
			optionHU.value = 'HU';
			countrySelect.add(optionHU);

			var optionID = document.createElement('option');
			optionID.text = 'ID - Indonesia';
			optionID.value = 'ID';
			countrySelect.add(optionID);

			var optionIE = document.createElement('option');
			optionIE.text = 'IE - Ireland';
			optionIE.value = 'IE';
			countrySelect.add(optionIE);

			var optionIL = document.createElement('option');
			optionIL.text = 'IL - Israel';
			optionIL.value = 'IL';
			countrySelect.add(optionIL);

			var optionIN = document.createElement('option');
			optionIN.text = 'IN - India';
			optionIN.value = 'IN';
			countrySelect.add(optionIN);

			var optionIT = document.createElement('option');
			optionIT.text = 'IT - Italia';
			optionIT.value = 'IT';
			countrySelect.add(optionIT);

			var optionJP = document.createElement('option');
			optionJP.text = 'JP - Japan';
			optionJP.value = 'JP';
			countrySelect.add(optionJP);

			var optionKE = document.createElement('option');
			optionKE.text = 'KE - Kenya';
			optionKE.value = 'KE';
			countrySelect.add(optionKE);

			var optionKR = document.createElement('option');
			optionKR.text = 'KR - South Korea';
			optionKR.value = 'KR';
			countrySelect.add(optionKR);

			var optionMX = document.createElement('option');
			optionMX.text = 'MX - Mexico';
			optionMX.value = 'MX';
			countrySelect.add(optionMX);

			var optionMY = document.createElement('option');
			optionMY.text = 'MY - Malaysia';
			optionMY.value = 'MY';
			countrySelect.add(optionMY);

			var optionNG = document.createElement('option');
			optionNG.text = 'NG - Nigeria';
			optionNG.value = 'NG';
			countrySelect.add(optionNG);

			var optionNL = document.createElement('option');
			optionNL.text = 'NL - Netherlands';
			optionNL.value = 'NL';
			countrySelect.add(optionNL);

			var optionNO = document.createElement('option');
			optionNO.text = 'NO - Norway';
			optionNO.value = 'NO';
			countrySelect.add(optionNO);

			var optionNZ = document.createElement('option');
			optionNZ.text = 'NZ - New Zealand';
			optionNZ.value = 'NZ';
			countrySelect.add(optionNZ);

			var optionPH = document.createElement('option');
			optionPH.text = 'PH - Philippines';
			optionPH.value = 'PH';
			countrySelect.add(optionPH);

			var optionPL = document.createElement('option');
			optionPL.text = 'PL - Poland';
			optionPL.value = 'PL';
			countrySelect.add(optionPL);

			var optionPT = document.createElement('option');
			optionPT.text = 'PT - Portugal';
			optionPT.value = 'PT';
			countrySelect.add(optionPT);

			var optionRO = document.createElement('option');
			optionRO.text = 'RO - Romania';
			optionRO.value = 'RO';
			countrySelect.add(optionRO);

			var optionRU = document.createElement('option');
			optionRU.text = 'RU - Russia';
			optionRU.value = 'RU';
			countrySelect.add(optionRU);

			var optionSA = document.createElement('option');
			optionSA.text = 'SA - Saudi Arabia';
			optionSA.value = 'SA';
			countrySelect.add(optionSA);
		
			var optionSE = document.createElement('option');
			optionSE.text = 'SE - Sweden';
			optionSE.value = 'SE';
			countrySelect.add(optionSE);

			var optionSG = document.createElement('option');
			optionSG.text = 'SG - Singapore';
			optionSG.value = 'SG';
			countrySelect.add(optionSG);

			var optionTH = document.createElement('option');
			optionTH.text = 'TH - Thailand';
			optionTH.value = 'TH';
			countrySelect.add(optionTH);

			var optionTR = document.createElement('option');
			optionTR.text = 'TR - Turkey';
			optionTR.value = 'TR';
			countrySelect.add(optionTR);

			var optionTW = document.createElement('option');
			optionTW.text = 'TW - Taiwan';
			optionTW.value = 'TW';
			countrySelect.add(optionTW);

			var optionUA = document.createElement('option');
			optionUA.text = 'UA - Ukraine';
			optionUA.value = 'UA';
			countrySelect.add(optionUA);
		
			var optionUS = document.createElement('option');
			optionUS.text = 'US - United States';
			optionUS.value = 'US';
			countrySelect.add(optionUS);

			var optionVN = document.createElement('option');
			optionVN.text = 'VN - Viet Nam';
			optionVN.value = 'VN';
			countrySelect.add(optionVN);

			var optionZA = document.createElement('option');
			optionZA.text = 'ZA - South Africa';
			optionZA.value = 'ZA';
			countrySelect.add(optionZA);

			contentDiv.appendChild(countrySelect);

			contentDiv.insertAdjacentHTML('beforeend', ' ');

			goButton = document.createElement('button');
			goButton.textContent = 'Go';
			goButton.addEventListener('click', goTrends);

			contentDiv.appendChild(goButton);


			/////


			function goTrends(){

				const apiRequestHeaders = {
					"apikey": "9455a76bb03c5a8f8305"
				};

				//const reqUrl = 'http://localhost:5000/daily_trends/' + countrySelect.value + '/';
				const reqUrl = 'https://nnoi.se/api/daily_trends/' + countrySelect.value + '/';

				const apiRequest = new Request(reqUrl,
					{headers: apiRequestHeaders});
				
				var jsonRequest = fetch(apiRequest)
					.then(response => response.json());

				contentDiv.replaceChildren();
				contentDiv.insertAdjacentHTML('beforeend', 'Loading... &#9203;');

				jsonRequest.then(data => {
					displayTrends(data);
				})
				.catch(e => contentDiv.insertAdjacentHTML('beforeend', '<br>' + e));
			}
		

			function displayTrends(data){
				if('error' in data){
					contentDiv.insertAdjacentHTML('beforeend', '<br> Api Error - ' + data.error);
				} else {
					pageTitle.textContent += ' - ' + countrySelect.value;
					contentDiv.replaceChildren();

					for(var i = 0; i < data.daily_trends.length; i++){
						var toInsert = '<p><a href="'+ data.daily_trends[i].url +
						'" target="_blank">' + data.daily_trends[i].query + '</a></p>';
						contentDiv.insertAdjacentHTML('beforeend', toInsert);
					}
				}
			}


		</script>
	</body>

</html>
